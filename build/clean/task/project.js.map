{"version":3,"names":[],"mappings":"","sources":["task/project.js"],"sourcesContent":["\"use strict\";\nconst R = require('ramda');\nconst gulp = require('gulp');\nconst task_1 = require('./task');\nclass Projectlist {\n    constructor(list) {\n        this.list = list;\n        this.rendered = false;\n    }\n    static configSplitter(obj) {\n        const pairToTask = (pair) => R.apply(Project.configSplitter, pair);\n        const toPairs = R.toPairs(obj);\n        let tasklist = R.map(pairToTask)(toPairs);\n        return new Projectlist(tasklist);\n    }\n    get _render() {\n        const thisRender = () => {\n            this.list.forEach(e => e.render);\n            this.rendered = true;\n        };\n        const onceRender = R.once(thisRender);\n        return onceRender();\n    }\n    render() {\n        return this._render;\n    }\n    run() {\n        if (!this.rendered)\n            this.render();\n        this.list.forEach(e => e.run());\n    }\n    get(projectname) {\n        return R.find((e) => e.uid === projectname)(this.list);\n    }\n}\nexports.Projectlist = Projectlist;\nclass Project {\n    constructor(list, uid) {\n        this.list = list;\n        this.uid = uid;\n        this.rendered = false;\n    }\n    static configSplitter(projectname, obj) {\n        const pairToTask = (pair) => new task_1.FullTask(projectname, pair[0], pair[1]);\n        const toPairs = R.toPairs(obj);\n        let tasklist = R.map(pairToTask)(toPairs);\n        return new Project(tasklist, projectname);\n    }\n    get _render() {\n        const thisRender = () => {\n            this.list.forEach(e => e.render);\n            this.rendered = true;\n            gulp.task(this.uid, Project.childNames(this));\n        };\n        const onceRender = R.once(thisRender);\n        return onceRender();\n    }\n    render() {\n        return this._render;\n    }\n    run() {\n        if (!this.rendered)\n            this.render();\n        return gulp.start([this.uid]);\n    }\n    get(taskname) {\n        return R.find((e) => e.name.short === taskname)(this.list);\n    }\n}\nProject.childNames = (obj) => R.map((e) => e.uid)(obj.list);\nexports.Project = Project;\n"],"file":"task/project.js","sourceRoot":"/source/"}